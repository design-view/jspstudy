<%@page import="member.MemberDAO"%>
<%@page import="common.JSFunction"%>
<%@page import="java.sql.PreparedStatement"%>
<%@page import="common.JDBCConnect"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%
	//요청정보 변수에 할당
	request.setCharacterEncoding("utf-8");
	String oldid = request.getParameter("oldid");
	out.println(oldid);
	String id = request.getParameter("id");
	String pw = request.getParameter("pw");
	String name = request.getParameter("username");
	
	//오라클 접속
	MemberDAO dao = new MemberDAO(application);
	
	//쿼리작성&쿼리객체생성
	String query = "update member set id=?, pass=?, name=? where id=?";
	PreparedStatement psmt = jdbc.con.prepareStatement(query);
	psmt.setString(1, id);
	psmt.setString(2, pw);
	psmt.setString(3, name);
	psmt.setString(4, oldid);
	
	//쿼리실행
	int result = psmt.executeUpdate();
	if(result==1){
		JSFunction.alertLocation("회원정보가 수정되었습니다.","memberlist.jsp", out);
	}else {
		JSFunction.alertLocation("수정에 문제가 있습니다.","memberlist.jsp", out);
	} 
	jdbc.close();
	
%>